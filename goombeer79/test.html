 <!DOCTYPE html>
 <html>
   <head>
     <meta charset="utf-8">
     <title>管理画面</title>
     <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.18.1/build/cssreset/cssreset-min.css">
     <link rel="stylesheet" href="./css/show.css">
     <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
   </head>
   <body>
    <div class="main">
    <div class="table_area">
      <table id="table">
        <tr class="article">
        </tr>
      </table>
      <button type="button" name="show" id="show">一覧表示</button>
      <button type="button" name="judge">合否を通知する</button>
      <button type="button" name="contact" id="contact">チェックした人物と連絡をとる</button>

    </div>
     <div class="chat">
         <ul id="output"></ul>
         <div id="input">
           <input type="text" id="username" placeholder="ユーザー名を入力してください">
           <input type="text" name="" value="" id="text" placeholder="メッセージ内容を入力してください">
         </div>
     </div>
    </div>

     <script>
     $('#show').click(function(){
       console.log("kurikku");
       $.ajax('database.php',
       {
         type: 'GET',
         dataType: 'json'
       })
       .done(function (data) {
         console.log(data);
         var data2 = [];
         for (var i = 0; i < data.length; i++) {
           data2.push([]);
           Object.keys(data[i]).map(function(key, index) {
             ar2[i].push(data[i][key]);
           });
         }
         var data3 = Object.keys(data[0]).map(function(key, index) {
           return key;
         });

         for (var i = 0; i < data3.length; i++) {
           var th='<th class='+data3[i]+'>'+data3[i]+'</th>';
           $('.article').append(th);
         }
         for (var j = 0; j < data2.length; j++) {
           var td ='<tr>';
           for (var i = 0; i < data2[j].length; i++) {
             if (data2[j][i] == "pass") {
               td += '<td class="data"><select name="judge"><option value="合格" name="pass">合格</option><option value="不合格" name="unpass">不合格</option></td>';
             } else if (data2[j][i] == "unpass") {
               td += '<td class="data"><select name="judge"><option value="合格" name="pass">合格</option><option value="不合格" name="unpass">不合格</option></td>';
             } else{
               td += '<td class="data">'+data2[j][i]+'</td>';
             }
           }
           td += '<tr>';
           $('#table').append(td);

       }

     })

       .fail(function (data) {
         console.log("失敗");
         console.log(data);
       });




     });
     </script>
   </body>
 </html>
